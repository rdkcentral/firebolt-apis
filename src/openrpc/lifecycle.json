{
  "openrpc": "1.2.4",
  "info": {
    "title": "Lifecycle",
    "description": "Methods and events for responding to lifecycle changes in your app",
    "version": "0.0.0"
  },
  "methods": [
    {
      "name": "ready",
      "tags": [
        {
          "name": "calls-metrics"
        },
        {
          "name": "capabilities",
          "x-uses": ["xrn:firebolt:capability:lifecycle:ready"]
        },
        {
          "name": "exclude-from-sdk"
        }
      ],
      "summary": "Notify the platform that the app is ready",
      "params": [],
      "result": {
        "name": "result",
        "schema": {
          "const": null
        }
      },
      "examples": [
        {
          "name": "Let the platform know that your app is ready",
          "params": [],
          "result": {
            "name": "Default Result",
            "value": null
          }
        }
      ]
    },
    {
      "name": "close",
      "tags": [
        {
          "name": "capabilities",
          "x-uses": ["xrn:firebolt:capability:lifecycle:state"]
        }
      ],
      "summary": "Request that the platform move your app out of focus",
      "params": [
        {
          "name": "reason",
          "summary": "The reason the app is requesting to be closed",
          "required": true,
          "schema": {
            "$ref": "https://meta.rdkcentral.com/firebolt/schemas/lifecycle#/definitions/CloseReason"
          }
        }
      ],
      "result": {
        "name": "success",
        "schema": {
          "const": null
        }
      },
      "examples": [
        {
          "name": "Close the app when the user presses back on the app home screen",
          "params": [
            {
              "name": "reason",
              "value": "remoteButton"
            }
          ],
          "result": {
            "name": "Default Result",
            "value": null
          }
        },
        {
          "name": "Close the app when the user selects an exit menu item",
          "params": [
            {
              "name": "reason",
              "value": "userExit"
            }
          ],
          "result": {
            "name": "Default Result",
            "value": null
          }
        }
      ]
    },
    {
      "name": "finished",
      "tags": [
        {
          "name": "exclude-from-sdk"
        },
        {
          "name": "capabilities",
          "x-uses": ["xrn:firebolt:capability:lifecycle:state"]
        }
      ],
      "summary": "Notify the platform that the app is done unloading",
      "params": [],
      "result": {
        "name": "results",
        "schema": {
          "const": null
        }
      },
      "examples": [
        {
          "name": "Default Example",
          "params": [],
          "result": {
            "name": "Default Result",
            "value": null
          }
        }
      ]
    },
    {
      "name": "state",
      "summary": "Get the current state of the app. This function is **synchronous**.",
      "tags": [
        {
          "name": "synchronous"
        },
        {
          "name": "exclude-from-sdk"
        },
        {
          "name": "capabilities",
          "x-uses": ["xrn:firebolt:capability:lifecycle:state"]
        }
      ],
      "params": [],
      "result": {
        "name": "state",
        "summary": "the current state of the app.",
        "schema": {
          "$ref": "https://meta.rdkcentral.com/firebolt/schemas/lifecycle#/definitions/LifecycleState"
        }
      },
      "examples": [
        {
          "name": "Default Example",
          "params": [],
          "result": {
            "name": "Default Result",
            "value": "foreground"
          }
        }
      ]
    },
    {
      "name": "inactive",
      "tags": [
        {
          "name": "notifier",
          "x-event": "Lifecycle.onInactive"
        },
        {
          "name": "capabilities",
          "x-uses": ["xrn:firebolt:capability:lifecycle:state"]
        }
      ],
      "summary": "Listen to the inactive event",
      "params": [
        {
          "name": "value",
          "schema": {
            "$ref": "#/components/schemas/LifecycleEvent"
          }
        }
      ],
      "examples": [
        {
          "name": "Default Example",
          "params": [
            {
              "name": "value",
              "value": {
                "state": "inactive",
                "previous": "initializing"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "foreground",
      "tags": [
        {
          "name": "notifier",
          "x-event": "Lifecycle.onForeground"
        },
        {
          "name": "capabilities",
          "x-uses": ["xrn:firebolt:capability:lifecycle:state"]
        }
      ],
      "summary": "Listen to the foreground event",
      "params": [
        {
          "name": "value",
          "schema": {
            "$ref": "#/components/schemas/LifecycleEvent"
          }
        }
      ],
      "examples": [
        {
          "name": "Default Example",
          "params": [
            {
              "name": "Default Result",
              "value": {
                "state": "foreground",
                "previous": "inactive"
              }
            }
          ]
        },
        {
          "name": "Move to foreground via remote branded buton",
          "params": [
            {
              "name": "value",
              "value": {
                "state": "foreground",
                "previous": "inactive",
                "source": "remote"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "background",
      "tags": [
        {
          "name": "notifier",
          "x-event": "Lifecycle.onBackground"
        },
        {
          "name": "capabilities",
          "x-uses": ["xrn:firebolt:capability:lifecycle:state"]
        }
      ],
      "summary": "Listen to the background event",
      "params": [
        {
          "name": "value",
          "schema": {
            "$ref": "#/components/schemas/LifecycleEvent"
          }
        }
      ],
      "examples": [
        {
          "name": "Default Example",
          "params": [
            {
              "name": "value",
              "value": {
                "state": "background",
                "previous": "foreground"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "suspended",
      "tags": [
        {
          "name": "notifier",
          "x-event": "Lifecycle.onSuspended"
        },
        {
          "name": "capabilities",
          "x-uses": ["xrn:firebolt:capability:lifecycle:state"]
        }
      ],
      "summary": "Listen to the suspended event",
      "params": [
        {
          "name": "value",
          "schema": {
            "$ref": "#/components/schemas/LifecycleEvent"
          }
        }
      ],
      "examples": [
        {
          "name": "Default Example",
          "params": [
            {
              "name": "value",
              "value": {
                "state": "suspended",
                "previous": "inactive"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "unloading",
      "tags": [
        {
          "name": "notifier",
          "x-event": "Lifecycle.onUnloading"
        },
        {
          "name": "capabilities",
          "x-uses": ["xrn:firebolt:capability:lifecycle:state"]
        }
      ],
      "summary": "Listen to the unloading event",
      "params": [
        {
          "name": "value",
          "schema": {
            "$ref": "#/components/schemas/LifecycleEvent"
          }
        }
      ],
      "examples": [
        {
          "name": "Default Example",
          "params": [
            {
              "name": "value",
              "value": {
                "state": "unloading",
                "previous": "inactive"
              }
            }
          ]
        }
      ]
    }
  ],
  "components": {
    "schemas": {
      "LifecycleEvent": {
        "title": "LifecycleEvent",
        "description": "A an object describing the previous and current states",
        "type": "object",
        "required": ["state", "previous"],
        "properties": {
          "state": {
            "$ref": "https://meta.rdkcentral.com/firebolt/schemas/lifecycle#/definitions/LifecycleState",
            "description": "The current lifcycle state"
          },
          "previous": {
            "$ref": "https://meta.rdkcentral.com/firebolt/schemas/lifecycle#/definitions/LifecycleState",
            "description": "The previous lifcycle state"
          },
          "source": {
            "type": "string",
            "enum": ["voice", "remote"],
            "description": "The source of the lifecycle change."
          }
        }
      }
    }
  }
}
